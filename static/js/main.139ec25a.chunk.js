(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,a){e.exports=a(47)},27:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(15),s=a.n(o),i=(a(27),a(2)),c=a.n(i),l=a(3),u=a(5),m=a(16),d=a(17),h=a(19),p=a(18),g=a(20),f=a(4),y=a.n(f);var v=function(e){return r.a.createElement("form",{onSubmit:e.search,className:"form-flex"},r.a.createElement("div",{className:"form-inputs"},r.a.createElement("div",{className:"start-input-group input-group"},r.a.createElement("h2",null,"Where are you?"),r.a.createElement("input",{type:"text",name:"base",placeholder:"ex. 483 Queen St W, Toronto",required:!0,pattern:"\\S.{0,40}",title:"No empty space in the beginning please.",value:e.base,onChange:e.handleInput,disabled:e.usingCurrent}),r.a.createElement("div",{className:"check-contain"},r.a.createElement("label",{htmlFor:"current-location",className:"checkbox-container"},r.a.createElement("input",{id:"current-location",type:"checkbox",className:"checkbox",onChange:e.getCurrentLocation}),r.a.createElement("label",{htmlFor:"current-location",className:"check-label"},"Use Current Location")))),r.a.createElement("div",{className:"search-input-group input-group"},r.a.createElement("h2",null,"Where would you like to go?"),r.a.createElement("input",{type:"text",name:"searchTerm",placeholder:"ex. cafe, Tim Horton's",required:!0,title:"No empty space in the beginning please.",pattern:"\\S.{0,40}",value:e.searchTerm,onChange:e.handleInput}),r.a.createElement("div",{className:"check-contain"},r.a.createElement("label",{htmlFor:"tourist-mode",className:"checkbox-container"},r.a.createElement("input",{id:"tourist-mode",type:"checkbox",className:"checkbox",onChange:e.toggleTouristMode}),r.a.createElement("label",{htmlFor:"tourist-mode",className:"check-label"},"Tourist Mode",r.a.createElement("p",{className:"tourist"},"(highlights multiple instances of same location)"))))),r.a.createElement("div",{className:"range-input-group input-group"},r.a.createElement("h2",null,"How far would you go?"),r.a.createElement("input",{type:"range",name:"range",className:"range-slider",min:"1000","aria-valuemin":"1000",max:"20000","aria-valuemax":"20000",step:"1000",value:e.range,onMouseUp:e.handleInput,onTouchEnd:e.handleInput,onKeyDown:e.handleEnter,onChange:e.updateSliderRange}),r.a.createElement("h4",null,e.range/1e3,"km"))),r.a.createElement("div",{className:"form-button"},r.a.createElement("button",{type:"submit",id:"submit-search"},"Submit")))};var b=function(e){return r.a.createElement("div",{className:"map-markers"},r.a.createElement("img",{src:e.url}),r.a.createElement("div",{className:"loading-popup",style:e.style},r.a.createElement("p",null,"Retrieving Map...")))};var E=function(e){var t=e.setDestination,a=e.index,n=e.name,o=e.address,s=e.highlightedLocations,i=e.touristMode,c=e.duplicateNames;return r.a.createElement("button",{onClick:function(){t(o)},className:s[0]===a||s[1]===a?"highlighted-button":i&&c[n]>1?"tourist-mode-button":"",id:s[0]===a?"button-highlight-id":i&&c[n]>1?"tourist-mode-id":""},r.a.createElement("h4",null,n),r.a.createElement("p",null,o))};var w=function(e){return r.a.createElement("div",{className:"location-list",id:"location-list-id"},e.areSearchResultsEmpty?r.a.createElement("p",{className:"no-results-found-text"},"No search results found. Try searching for something a little less creative. \ud83d\ude12"):null,e.searchResults.map(function(t,a){return r.a.createElement(E,{key:a+t.address,setDestination:e.setDestination,index:a,name:t.name,address:t.address,highlightedLocations:e.highlightedLocations,touristMode:e.touristMode,duplicateNames:e.duplicateNames})}))};var S=function(e){return r.a.createElement("div",{className:"directions-list"},r.a.createElement("h3",null,"Directions"),r.a.createElement("ol",null,e.directions.map(function(e,t){return r.a.createElement("li",{key:t},e)})))};var k=function(e){return r.a.createElement("div",{className:"geolocator-loading-prompt",style:e.style},r.a.createElement("p",null,"Finding your approximate address..."))},N=(a(46),function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(h.a)(this,Object(p.a)(t).call(this))).handleInput=function(t){e.setState(Object(u.a)({},t.target.name,t.target.value)),"range"===t.target.name&&e.state.base&&e.state.searchTerm&&e.search()},e.updateSliderRange=function(t){e.setState(Object(u.a)({},t.target.name,t.target.value))},e.handleEnter=function(t){13===t.keyCode&&e.handleInput(t)},e.toggleTouristMode=function(t){e.setState({touristMode:!e.state.touristMode},function(){e.state.searchResults.length>0&&e.getLocationsMapImage()})},e.displayRoute=Object(l.a)(c.a.mark(function t(){var a,n;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.get("http://www.mapquestapi.com/directions/v2/route",{params:{key:e.APIKEY,from:e.state.base,to:e.state.destination}});case 3:a=t.sent,n=a.data.route.legs[0].maneuvers.map(function(e){return e.narrative}),e.setState({directions:n}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("Cannot get route.");case 11:case"end":return t.stop()}},t,null,[[0,8]])})),e.streetArrayToString=function(){return e.state.searchResults.reduce(function(t,a,n){return e.state.highlightedLocations.includes(n)?t+a.address+"|flag-FFD700-meh||":e.state.touristMode&&e.state.duplicateNames[a.name]>1?t+a.address+"|marker-93003D||":t+a.address+"||"},"").replace("#"," ")},e.getDuplicateIndex=function(){var t={},a=!0,n=!1,r=void 0;try{for(var o,s=e.state.searchResults[Symbol.iterator]();!(a=(o=s.next()).done);a=!0){var i=o.value;t[i.name]=t[i.name]?t[i.name]+1:1}}catch(c){n=!0,r=c}finally{try{a||null==s.return||s.return()}finally{if(n)throw r}}e.setState({duplicateNames:t})},e.getCurrentLocation=function(){e.setState({usingCurrent:!e.state.usingCurrent}),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){e.setState({baseGeoLocation:[t.coords.latitude,t.coords.longitude]}),e.reverseGeo("".concat(t.coords.latitude,",").concat(t.coords.longitude))}):alert("Geolocation is not supported by this browser.")},e.setDestination=function(t){e.setState({destination:t,showDirections:!0},function(){e.getRouteMapImage(),e.displayRoute()})},e.geoLocation=function(){var t=Object(l.a)(c.a.mark(function t(a){var n,r,o,s;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,y.a.get("http://www.mapquestapi.com/geocoding/v1/address",{params:{key:e.APIKEY,location:a}});case 3:n=t.sent,r=n.data.results[0].locations[0].latLng,o=r.lat,s=r.lng,e.setState({baseGeoLocation:[o,s]}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("Cannot get geo location.");case 11:case"end":return t.stop()}},t,null,[[0,8]])}));return function(e){return t.apply(this,arguments)}}(),e.reverseGeo=function(){var t=Object(l.a)(c.a.mark(function t(a){var n,r;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!0!==e.state.usingCurrent){t.next=14;break}return e.setState({geolocationLoadingStyle:e.displayShow}),t.prev=2,t.next=5,y.a.get("http://www.mapquestapi.com/geocoding/v1/reverse",{params:{key:e.APIKEY,location:a}});case 5:n=t.sent,r=n.data.results[0].locations[0],e.setState({base:r.street+", "+r.adminArea5+", "+r.adminArea3,geolocationLoadingStyle:e.displayNone}),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),alert("An error occured finding your address automatically."),e.setState({geolocationLoadingStyle:e.displayNone});case 14:case"end":return t.stop()}},t,null,[[2,10]])}));return function(e){return t.apply(this,arguments)}}(),e.search=function(){var t=Object(l.a)(c.a.mark(function t(a){var n,r,o;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a&&a.preventDefault(),e.setState({directions:[]}),t.prev=2,t.next=5,e.geoLocation(e.state.base);case 5:return t.next=7,y.a.get("https://www.mapquestapi.com/search/v4/place",{params:{key:e.APIKEY,sort:"relevance",circle:"".concat(e.state.baseGeoLocation[1],", ").concat(e.state.baseGeoLocation[0],", ").concat(e.state.range),q:e.state.searchTerm,pageSize:50}});case 7:n=t.sent,0===(r=n.data.results.map(function(e){return{name:e.name,address:e.displayString.slice(e.name.length+2)}})).length?e.setState({areSearchResultsEmpty:!0}):e.setState({areSearchResultsEmpty:!1}),o=[null,null],o=r.length%2===0?[r.length/2-1,r.length/2]:[Math.floor(r.length/2)],e.setState({searchResults:r,highlightedLocations:o,showInfo:!0}),e.locationListRef.current.scrollIntoView({behavior:"smooth",block:"nearest"}),e.getDuplicateIndex(),e.getLocationsMapImage(),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(2),alert("Cannot perform search. An error has occured.");case 21:case"end":return t.stop()}},t,null,[[2,18]])}));return function(e){return t.apply(this,arguments)}}(),e.getLocationsMapImage=Object(l.a)(c.a.mark(function t(){var a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({mapLoadingStyle:e.displayShow}),t.prev=1,t.next=4,y()({method:"GET",url:"https://www.mapquestapi.com/staticmap/v5/map",responseType:"blob",params:{key:e.APIKEY,locations:e.streetArrayToString()+e.state.base+"|flag-start",scalebar:"true|bottom",shape:"radius:".concat(e.state.range/1e3,"km")+"|"+e.state.base,size:"800,800"}});case 4:a=t.sent,e.setState({mapImageURL:URL.createObjectURL(a.data),mapLoadingStyle:e.displayNone}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),alert("Cannot generate locations map."),e.setState({mapLoadingStyle:e.displayNone});case 12:case"end":return t.stop()}},t,null,[[1,8]])})),e.getRouteMapImage=Object(l.a)(c.a.mark(function t(){var a;return c.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({mapLoadingStyle:{display:"block"}}),t.prev=1,t.next=4,y()({method:"GET",url:"https://www.mapquestapi.com/staticmap/v5/map",responseType:"blob",params:{key:e.APIKEY,start:e.state.base+"|flag-start",end:e.state.destination+"|flag-end",scalebar:"true|bottom",size:"800,800"}});case 4:a=t.sent,e.setState({mapImageURL:URL.createObjectURL(a.data),mapLoadingStyle:{display:"none"}}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),alert("Cannot generate route map.");case 11:case"end":return t.stop()}},t,null,[[1,8]])})),e.APIKEY="u1dw2yO1uotU0TFFZdonF5x98157c84N",e.displayNone={display:"none"},e.displayShow={display:"block"},e.locationListRef=r.a.createRef(),e.state={base:"",usingCurrent:!1,searchTerm:"",range:1e4,baseGeoLocation:[],searchResults:[],mapImageURL:"",destination:"",highlightedLocations:[null,null],directions:[],areSearchResultsEmpty:!1,mapLoadingStyle:e.displayNone,geolocationLoadingStyle:e.displayNone,showInfo:!1,showDirections:!1,touristMode:!1,duplicateNames:{}},e}return Object(g.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(){if(this.state.searchResults.length>0){var e=document.getElementById("button-highlight-id"),t=e.offsetTop-4*e.offsetHeight;document.getElementById("location-list-id").scrollTop=t}}},{key:"render",value:function(){return r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement("h1",null,"Average Joe")),r.a.createElement("div",{className:"description"},r.a.createElement("p",null,"Want to check out a new place, but not somewhere ",r.a.createElement("em",null,"too")," great? Do you long for the days when you weren't excited about anything? This app is for you! Pick your location, then search for something you're interested in. You'll get the most middle-of-the-road place we can find in terms of relevance to your search, with directions on how to get there. With any luck, you'll have no strong feelings one way or the other!")),r.a.createElement("div",{className:"form-contact-contain"},r.a.createElement("div",{className:"form-container"},r.a.createElement(v,{search:this.search,base:this.state.base,usingCurrent:this.state.usingCurrent,range:this.state.range,handleInput:this.handleInput,handleEnter:this.handleEnter,updateSliderRange:this.updateSliderRange,getCurrentLocation:this.getCurrentLocation,searchTerm:this.state.searchTerm,toggleTouristMode:this.toggleTouristMode}),r.a.createElement(k,{style:this.state.geolocationLoadingStyle})),this.state.showInfo?r.a.createElement("div",{className:"content-container",ref:this.locationListRef},r.a.createElement("div",{className:"map-and-locations"},r.a.createElement(w,{setDestination:this.setDestination,searchResults:this.state.searchResults,highlightedLocations:this.state.highlightedLocations,touristMode:this.state.touristMode,duplicateNames:this.state.duplicateNames,areSearchResultsEmpty:this.state.areSearchResultsEmpty}),r.a.createElement(b,{url:this.state.mapImageURL,style:this.state.mapLoadingStyle,touristMode:this.state.touristMode})),r.a.createElement("div",{className:"direction-container"},this.state.showDirections&&this.state.directions.length>0?r.a.createElement(S,{directions:this.state.directions}):null)):null)))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[21,1,2]]]);
//# sourceMappingURL=main.139ec25a.chunk.js.map